<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æˆ‘çš„ç¬”è®° v1.0.0</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    padding: 25px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f7f8fa;
    max-width: 500px;
    margin: 0 auto;
    transition: background 0.3s;
    position: relative;
  }
  .help-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: #007aff;
    color: #fff;
    font-size: 18px;
    font-weight: bold;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .help-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999;
  }
  .help-content {
    background: #fff;
    width: 90%;
    max-width: 380px;
    padding: 24px;
    border-radius: 16px;
  }
  .help-content h4 {
    margin-bottom: 12px;
    font-size: 18px;
  }
  .help-content p {
    line-height: 1.6;
    margin-bottom: 8px;
    font-size: 15px;
  }
  .help-close {
    margin-top: 16px;
    padding: 10px;
    width: 100%;
    background: #007aff;
    color: #fff;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }

  h3 {
    margin-bottom: 18px;
    font-size: 22px;
    text-align: center;
  }

  .search-box {
    width: 100%;
    padding: 12px 14px;
    border-radius: 12px;
    border: 1px solid #ddd;
    font-size: 15px;
    margin-bottom: 12px;
    outline: none;
  }

  .skin-bar {
    display: flex;
    gap: 6px;
    margin-bottom: 14px;
    flex-wrap: wrap;
  }
  .skin {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid #fff;
    cursor: pointer;
    box-shadow: 0 0 4px rgba(0,0,0,0.2);
  }
  .skin-default { background: #f7f8fa; }
  .skin-red { background: #ffeaea; }
  .skin-yellow { background: #fff9e6; }
  .skin-blue { background: #e6f7ff; }
  .skin-purple { background: #f3e6ff; }
  .skin-green { background: #e6ffed; }
  .skin-gradient1 { background: linear-gradient(135deg, #f5f7fa, #c3cfe2); }
  .skin-gradient2 { background: linear-gradient(135deg, #ffecd2, #fcb69f); }
  .skin-gradient3 { background: linear-gradient(135deg, #a8edea, #fed6e3); }

  input, textarea {
    width: 100%;
    margin-bottom: 12px;
    padding: 14px 16px;
    font-size: 16px;
    border: 1px solid #e1e4e8;
    border-radius: 14px;
    outline: none;
    background: #fff;
  }
  textarea {
    height: 120px;
    resize: none;
  }
  button {
    width: 100%;
    padding: 16px;
    font-size: 16px;
    border: none;
    border-radius: 14px;
    margin: 6px 0;
    background: #007aff;
    color: white;
    cursor: pointer;
  }
  .item {
    background: white;
    border-radius: 14px;
    padding: 18px;
    margin: 10px 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  .title {
    font-weight: 600;
    font-size: 17px;
    margin-bottom: 6px;
  }
  .time {
    font-size: 12px;
    color: #999;
    margin: 8px 0 10px;
  }
  .del {
    background: #ff3b30;
    padding: 8px 12px;
    font-size: 14px;
    border-radius: 10px;
    margin-right: 4px;
  }
  .edit {
    background: #ff9500;
    padding: 8px 12px;
    font-size: 14px;
    border-radius: 10px;
  }
  .edited {
    font-size: 12px;
    color: #007aff;
    margin-bottom: 8px;
  }
</style>
</head>
<body>

<button class="help-btn" onclick="openHelp()">?</button>

<h3>æˆ‘çš„ç¬”è®°</h3>

<input type="text" class="search-box" placeholder="ğŸ” æœç´¢æ ‡é¢˜æˆ–å†…å®¹..." oninput="search(this.value)">

<div class="skin-bar">
  <div class="skin skin-default" onclick="setSkin('default')"></div>
  <div class="skin skin-red" onclick="setSkin('red')"></div>
  <div class="skin skin-yellow" onclick="setSkin('yellow')"></div>
  <div class="skin skin-blue" onclick="setSkin('blue')"></div>
  <div class="skin skin-purple" onclick="setSkin('purple')"></div>
  <div class="skin skin-green" onclick="setSkin('green')"></div>
  <div class="skin skin-gradient1" onclick="setSkin('gradient1')"></div>
  <div class="skin skin-gradient2" onclick="setSkin('gradient2')"></div>
  <div class="skin skin-gradient3" onclick="setSkin('gradient3')"></div>
</div>

<input type="text" id="title" placeholder="æ ‡é¢˜">
<textarea id="text" placeholder="å†…å®¹"></textarea>

<button onclick="add()">ä¿å­˜</button>
<button onclick="clear_all()">æ¸…ç©ºæ‰€æœ‰</button>
<div id="list"></div>

<div class="help-modal" id="helpModal">
  <div class="help-content">
    <h4>ä½¿ç”¨è¯´æ˜</h4>
    <p>â€¢ è¾“å…¥æ ‡é¢˜å’Œå†…å®¹ï¼Œç‚¹å‡»ã€Œä¿å­˜ã€å³å¯è®°å½•ç¬”è®°</p>
    <p>â€¢ é¡¶éƒ¨æœç´¢æ¡†å¯æŸ¥æ‰¾ç¬”è®°é‡Œçš„ä»»ä½•æ–‡å­—</p>
    <p>â€¢ ç‚¹å‡»ã€Œä¿®æ”¹ã€å¯ç¼–è¾‘å·²æœ‰ç¬”è®°ï¼Œä¼šè®°å½•ä¿®æ”¹æ—¶é—´ä¸å½“æ—¥å¤©æ°”</p>
    <p>â€¢ ç‚¹å‡»å½©è‰²åœ†ç‚¹åˆ‡æ¢èƒŒæ™¯çš®è‚¤</p>
    <p>â€¢ æ•°æ®å­˜åœ¨æœ¬åœ°ï¼Œåˆ·æ–°ä¸ä¼šä¸¢</p>
    <button class="help-close" onclick="closeHelp()">æˆ‘çŸ¥é“äº†</button>
  </div>
</div>

<script>
var editIndex = -1;

// éšæœºå¤©æ°”ï¼ˆæ¼”ç¤ºç”¨ï¼Œç¨³å®šä¸æŠ¥é”™ï¼‰
function getTodayWeather() {
  const weathers = ["æ™´å¤©", "å¤šäº‘", "é˜´å¤©", "å°é›¨", "å¾®é£", "å¤§é›¾", "é›ª"];
  return weathers[Math.floor(Math.random() * weathers.length)];
}

function openHelp() { document.getElementById('helpModal').style.display = 'flex'; }
function closeHelp() { document.getElementById('helpModal').style.display = 'none'; }

function setSkin(skin) {
  document.body.className = '';
  document.body.classList.add('skin-' + skin);
  localStorage.setItem('skin', skin);
}

function getNotes() {
  return JSON.parse(localStorage.getItem('notes') || '[]')
}

function show(keyword = '') {
  var notes = getNotes();
  var html = '';
  for (var i = 0; i < notes.length; i++) {
    var title = notes[i].title || '';
    var text = notes[i].text || '';
    if (keyword && !title.includes(keyword) && !text.includes(keyword)) continue;
    
    html += '<div class="item">'
    html += '<div class="title">' + title + '</div>'
    html += '<div>' + text + '</div>'
    html += '<div class="time">åˆ›å»ºæ—¶é—´ï¼š' + notes[i].time + '</div>'
    if (notes[i].editedTime) {
      html += '<div class="edited">æœ€åä¿®æ”¹ï¼š' + notes[i].editedTime + ' Â· ' + notes[i].weather + '</div>'
    }
    html += '<button class="edit" onclick="startEdit(' + i + ')">ä¿®æ”¹</button>'
    html += '<button class="del" onclick="del(' + i + ')">åˆ é™¤</button>'
    html += '</div>'
  }
  document.getElementById('list').innerHTML = html;
}

function search(keyword) {
  show(keyword.trim());
}

// å¼€å§‹ä¿®æ”¹
function startEdit(index) {
  var notes = getNotes();
  editIndex = index;
  document.getElementById('title').value = notes[index].title || '';
  document.getElementById('text').value = notes[index].text || '';
}

// ä¿å­˜ / ä¿®æ”¹
function add() {
  var title = document.getElementById('title').value.trim()
  var t = document.getElementById('text').value.trim()
  if (!t) return

  var notes = getNotes()
  var now = new Date().toLocaleString()
  var weather = getTodayWeather();

  if (editIndex === -1) {
    // æ–°å¢
    notes.unshift({
      title: title || 'æ— æ ‡é¢˜',
      text: t,
      time: now,
      editedTime: '',
      weather: ''
    })
  } else {
    // ä¿®æ”¹
    notes[editIndex].title = title || 'æ— æ ‡é¢˜'
    notes[editIndex].text = t
    notes[editIndex].editedTime = now
    notes[editIndex].weather = weather
    editIndex = -1
  }

  localStorage.setItem('notes', JSON.stringify(notes))
  document.getElementById('title').value = ''
  document.getElementById('text').value = ''
  show()
}

function del(index) {
  if (!confirm('ç¡®å®šåˆ é™¤ï¼Ÿ')) return
  var notes = getNotes()
  notes.splice(index, 1)
  localStorage.setItem('notes', JSON.stringify(notes))
  show()
}

function clear_all() {
  if (!confirm('ç¡®å®šæ¸…ç©ºæ‰€æœ‰ï¼Ÿ')) return
  localStorage.removeItem('notes')
  show()
}

window.onload = function() {
  let savedSkin = localStorage.getItem('skin') || 'default';
  setSkin(savedSkin);
  show();
}
</script>
</body>
</html>
